<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Double-Slit Ultimate โ 2D/3D + LaTeX + PDF</title>
  <link rel="stylesheet" href="ุชุฌุฑุจุฉ ุงูุดู ุงููุฒุฏูุฌ/styles.css"/>
</head>
<body class="theme-dark">
  <header>
    <h1>ูุญุงูุงุฉ ุงูุดูู ุงููุฒุฏูุฌ โ Ultimate (2D/3D)</h1>
    <div class="spacer"></div>
    <button id="themeBtn" title="ุชุจุฏูู ููุงุฑู/ูููู">๐/โ๏ธ</button>
  </header>

  <main>
    <section class="panel">
      <div class="row wrap">
        <label>ุงูุนุฑุถ:</label>
        <label class="chip"><input type="radio" name="view" value="2d" checked> 2D</label>
        <label class="chip"><input type="radio" name="view" value="3d"> 3D</label>

        <div class="sep"></div>
        <label>ุงูููุฒูุงุก:</label>
        <label class="chip"><input type="radio" name="regime" value="fraunhofer" checked> ูุฑูููููุฑ (ุจุนูุฏ)</label>
        <label class="chip"><input type="radio" name="regime" value="fresnel"> ูุฑููู (ูุฑูุจ/ูููุฌูุฒ)</label>

        <div class="sep"></div>
        <label>ุฃุณููุจ ุงูุนุฑุถ (2D):</label>
        <label class="chip"><input type="radio" name="mode" value="wave" checked> ููุฌู</label>
        <label class="chip"><input type="radio" name="mode" value="particles"> ุฌุณููุงุช</label>
        <label class="chip"><input id="spectrum" type="checkbox"> ุทูู ุฃุจูุถ (RGB)</label>
      </div>

      <div class="grid">
        <div class="control">
          <label for="lambda">ุงูุทูู ุงูููุฌู ฮป (nm)</label>
          <input id="lambda" type="range" min="380" max="700" step="1" value="550">
          <div class="val"><span id="lambdaVal">550</span> nm</div>
        </div>
        <div class="control">
          <label for="d">ุงููุณุงูุฉ ุจูู ุงูุดููู d (ยตm)</label>
          <input id="d" type="range" min="5" max="500" step="1" value="120">
          <div class="val"><span id="dVal">120</span> ฮผm</div>
        </div>
        <div class="control">
          <label for="a">ุนุฑุถ ุงูุดู a (ยตm)</label>
          <input id="a" type="range" min="2" max="200" step="1" value="20">
          <div class="val"><span id="aVal">20</span> ฮผm</div>
        </div>
        <div class="control">
          <label for="L">ุจูุนุฏ ุงูุดุงุดุฉ L (m)</label>
          <input id="L" type="range" min="0.1" max="5" step="0.01" value="1.00">
          <div class="val"><span id="LVal">1.00</span> m</div>
        </div>
        <div class="control">
          <label for="coh">ุนุงูู ุงูุชูุงุณู ฮณ</label>
          <input id="coh" type="range" min="0" max="1" step="0.01" value="1">
          <div class="val"><span id="cohVal">1.00</span></div>
        </div>
        <div class="control only2d">
          <label for="rate">ุงูุฌุณููุงุช/ุซ (2D)</label>
          <input id="rate" type="range" min="10" max="8000" step="10" value="800">
          <div class="val"><span id="rateVal">800</span> /s</div>
        </div>
        <div class="control only2d">
          <label for="quality">ุฌูุฏุฉ ูุฑููู (ุนููุงุช/ุดู)</label>
          <input id="quality" type="range" min="32" max="512" step="32" value="160">
          <div class="val"><span id="qualityVal">160</span> ุนููุงุช</div>
        </div>
        <div class="control">
          <label for="span">ูุฌุงู ุงูุดุงุดุฉ ยฑXmax (cm)</label>
          <input id="span" type="range" min="0.5" max="8" step="0.1" value="3.0">
          <div class="val">ยฑ<span id="spanVal">3.0</span> cm</div>
        </div>
        <div class="control only3d">
          <label for="res">ุฏููุฉ ุชูุณุชุดุฑ 3D (px)</label>
          <input id="res" type="range" min="256" max="1024" step="128" value="512">
          <div class="val"><span id="resVal">512</span> px</div>
        </div>
      </div>

      <div class="row wrap">
        <label class="chip"><input id="slit1" type="checkbox" checked> ุงูุดู ุงูุฃูุณุฑ ูุนูุงู</label>
        <label class="chip"><input id="slit2" type="checkbox" checked> ุงูุดู ุงูุฃููู ูุนูุงู</label>
        <label class="chip"><input id="normalize" type="checkbox" checked> ุชุทุจูุน ุงูุดุฏุฉ</label>
        <label class="chip"><input id="showCurve" type="checkbox" checked> ุฅุธูุงุฑ ููุญูู ุงูุดุฏุฉ (2D)</label>
        <label class="chip"><input id="autoSpan" type="checkbox" checked> ุงุญุชูุงุก ุชููุงุฆู (2D)</label>
        <div class="spacer"></div>
        <span class="tiny">FPS: <span id="fps">0</span></span>
      </div>

      <div class="row wrap">
        <span class="muted">ูุณุจูุฉ ุงูุฅุนุฏุงุฏ:</span>
        <button class="pill" data-preset="red">ุฃุญูุฑ</button>
        <button class="pill" data-preset="green">ุฃุฎุถุฑ</button>
        <button class="pill" data-preset="blue">ุฃุฒุฑู</button>
        <button class="pill" data-preset="electron">ุฅููุชุฑููุงุช</button>
        <div class="spacer"></div>
        <button id="toggleRun" class="strong only2d">โฏ ุฌุณููุงุช 2D ุชุดุบูู/ุฅููุงู</button>
        <button id="step" class="only2d">โญ ุฎุทูุฉ ุฌุณููุงุช 2D</button>
        <button id="toggleRun3D" class="strong only3d">โฏ ุฌุณููุงุช 3D ุชุดุบูู/ุฅููุงู</button>
      </div>

      <div class="row wrap">
        <button id="resetBtn">โบ ุชุตููุฑ</button>
        <button id="snapBtn">๐ท ุญูุธ ุตูุฑุฉ</button>
        <button id="csvBtn">๐ ุชุตุฏูุฑ CSV</button>
        <button id="latexBtn">๐งฎ ุชุตุฏูุฑ LaTeX</button>
        <button id="pdfBtn">๐จ๏ธ PDF / ุทุจุงุนุฉ</button>
        <span class="tiny muted">ุงุฎุชุตุงุฑุงุช: Space/R/S/C/T</span>
      </div>
    </section>

    <!-- 2D -->
    <section class="stage stage-2d">
      <div class="col">
        <h3>ุงูููุธุฑ ุงูุฌุงูุจู (ุดููู โ ุดุงุดุฉ)</h3>
        <canvas id="sideView" width="420" height="320"></canvas>
      </div>
      <div class="col">
        <h3>ุดุงุดุฉ ุงูุฑุตุฏ (ุดุฏุฉ/ููุงุท)</h3>
        <canvas id="screen" width="900" height="360"></canvas>
      </div>
    </section>

    <!-- 3D -->
    <section class="stage stage-3d hidden">
      <canvas id="glcanvas" width="1100" height="560"></canvas>
      <div class="tiny muted" style="margin-top:6px">
        ุงููุงูุณ: ุณุญุจ=ูุฏุงุฑุ ุนุฌูุฉ=Zoomุ Shift+ุณุญุจ=ุชุญุฑูู โ ุฒุฑู <b>โบ ุชุตููุฑ</b> ูุนูุฏ ุชููุถุน ุงููุงููุฑุง.
      </div>
    </section>
  </main>

  <footer>
    <small class="muted">
      ูุฑูููููุฑ: \(I = I_0\,\mathrm{sinc}^2(\beta)\,[1+\gamma\cos(\Delta\phi)]\),
      \(\beta=\frac{\pi a x}{\lambda L}\), \(\Delta\phi=\frac{2\pi d x}{\lambda L}\).  
      ูุฑููู (ูููุฌูุฒ): \(I \propto |E_1+E_2|^2\), \(E_i=\int_{\text{ุดู}_i}\tfrac{e^{ikr}}{r}\,dy\), \(k=2\pi/\lambda\).  
      3D: ููุณ ุงูููุฒูุงุก ุชูุนุฑุถ ูุชูุณุดุฑ ุนูู ุงูุดุงุดุฉ + ูุณุงุทุฑ ููุญุงูุฑ XYZ + ุฌุณููุงุช ุซูุงุซูุฉ ุงูุฃุจุนุงุฏ.
    </small>
  </footer>

  <script src="ุชุฌุฑุจุฉ ุงูุดู ุงููุฒุฏูุฌ/app.js"></script>
</body>
</html>
